---
import Layout from './Layout.astro'
import DashboardNavbar from '../components/dashboard/DashboardNavbar'
import DashboardSidebar from '../components/dashboard/DashboardSidebar'
import { TrialBanner } from '../components/dashboard/TrialBanner'
import { supabase } from '../lib/supabase'
import { getTrialDaysRemaining, isTrialActive } from '../lib/subscription'

interface Props {
  title: string
}

const { title } = Astro.props
const currentPath = Astro.url.pathname

// Trial desactivado - no mostrar banner
const showTrialBanner = false
const trialDays = 0
const storeId = ''
---

<Layout title={title}>
  <div class="h-screen flex flex-col bg-gray-100">
    <!-- Trial Banner -->
    {showTrialBanner && (
      <TrialBanner daysRemaining={trialDays} storeId={storeId} client:load />
    )}
    
    <!-- Navbar en el fondo superior - full width -->
    <DashboardNavbar client:load currentPath={currentPath} />
    
    <!-- Contenedor principal - ocupa todo el espacio restante -->
    <div class="flex-1 p-6 overflow-hidden">
      <div class="flex gap-6 h-full">
        <!-- Sidebar como card - altura completa -->
        <DashboardSidebar client:load currentPath={currentPath} />

        <!-- Contenido principal como card -->
        <main class="flex-1 overflow-auto">
          <div class="px-6">
            <slot />
          </div>
        </main>
      </div>
    </div>
  </div>
</Layout>
